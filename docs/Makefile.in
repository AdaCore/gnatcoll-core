MAKEINFO=@MAKEINFO@
TEXI2DVI=@TEXI2DVI@
CP=cp
MKDIR=mkdir -p
prefix=@prefix@
datarootdir=@datarootdir@
datadir=@datadir@

all: gnatcoll/index.html gnatcoll.html gnatcoll.pdf gnatcoll.txt

gnatcoll/index.html: gnatcoll.texi gnatcoll.css
	${MAKEINFO} --html --css-include=gnatcoll.css --number-sections $<
	${CP} tip.png important.png note.png gnatcoll/

gnatcoll.html: gnatcoll.texi gnatcoll.css
	${MAKEINFO} --html --css-include=gnatcoll.css --no-split --no-headers -o $@ $<

gnatcoll.pdf: gnatcoll.texi
	echo x | ${TEXI2DVI} -p $<

gnatcoll.txt: gnatcoll.texi
	${MAKEINFO} --force --no-headers --no-split -o $@ $<

.PHONY: install
install:
	${MKDIR} ${datadir}/doc/gnatcoll
	-${CP} gnatcoll.html ${datadir}/doc/gnatcoll/ 2> /dev/null
	-${CP} gnatcoll.pdf ${datadir}/doc/gnatcoll/ 2> /dev/null

.PHONY: clean-temp-files
clean-temp-files:
	-$(RM) *.aux
	-$(RM) *.cp
	-$(RM) *.cps
	-$(RM) *.fn
	-$(RM) *.ky
	-$(RM) *.log
	-$(RM) *.pg
	-$(RM) *.toc
	-$(RM) *.tp
	-$(RM) *.vr

.PHONY: clean
clean: clean-temp-files
	-${RM} gnatcoll.pdf gnatcoll.txt gnatcoll.html
	-${RM} -rf gnatcoll/


